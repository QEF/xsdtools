!
! Copyright (C) 2001-2009 Quantum ESPRESSO group
! This file is distributed under the terms of the
! GNU General Public License. See the file `License'
! in the root directory of the present distribution,
! or http://www.gnu.org/copyleft/gpl.txt .
!
!
MODULE qes_types_module
  !
  ! Auto-generated code: don't edit this file
  !
  ! Quantum Espresso XSD namespace: {{schema.target_namespace}}
  !
  USE kinds, only: DP
  !
  IMPLICIT NONE
  !
  {%- for type in ( schema.types|sorted_complex_types ) %}
  TYPE :: {{type | type_name}}
    !
    CHARACTER(len=100) :: tagname
    LOGICAL  :: lwrite = .FALSE.
    LOGICAL  :: lread  = .FALSE.
    !
{%- for attr in type.attributes.values() %}
    {{ attr|fortran_type }} :: {{attr.local_name}}
  {%- if attr.is_optional() %}
    LOGICAL :: {{attr.local_name}}_ispresent = .FALSE.
  {%- endif %}
{%- endfor %}

{%- if type.is_extension() %}
    !
    {{ type.base_type|fortran_type }} :: {{type.local_name.replace('Type', '')}}
{%- endif %}
{%- if not type.has_simple_content() %}
{%- for element in type.content_type.iter_elements() %}
{%- if element.min_occurs == 0 %}
    LOGICAL  :: {{element.local_name}}_ispresent = .FALSE.
{%- endif %}
{%- if (element.max_occurs == 1) %}
    {%- if (element.type.target_namespace == schema.target_namespace) and (not element.type.is_simple() )%}
    TYPE({{ element|type_name }}) :: {{ element.local_name }}
    {%- else %}
    {{ element|fortran_type }} :: {{ element.local_name }}
    {%- endif %}
{%- else %}
    TYPE({{ element|type_name }}), DIMENSION(:), ALLOCATABLE :: {{ element|tag_name }}
    INTEGER   :: ndim_{{ element|tag_name }}
{%- endif %}
{%- endfor %}
{%- endif %}
    !
  END TYPE {{ type|type_name }}
  !
{%- endfor %}
  !
END MODULE qes_types_module
